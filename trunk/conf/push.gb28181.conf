# push gb28281 stream to SRS.

listen                  1935;
max_connections         1000;
daemon                  off;
pid                     ./objs/srs28181.pid
srs_log_tank            console;
stream_caster {
    enabled             on;
    caster              gb28181;

    #rtmp输出地址，可以参数化
    #[stream] 代表客户端sip设备编号
    #[timestamp] 时间戳
    output              rtmp://127.0.0.1/live/[stream];
    #sip监听udp端口
    listen              15060;
    
    #服务器主机号，可以域名或ip地址
    #也就是设备端将媒体发送的地址，如果是服务器是内外网
    #需要写外网地址
    host                192.168.1.27;

    #服务器端编号
    #设备端配置编号需要与该值一致，否则无法注册
    serial              34020000002020000001;

    #服务器端域
    realm               3402000000;

    #是否转发音频流
    #目前只支持aac格式，所以需要设备支持aac格式
    #on:转发音频  
    #off:不转发音频，只有视频
    #*注意*!!!:flv 只支持11025  22050  44100 三种
    #如果设备端没有三种中任何一个，转发时为自动选择一种格式
    #同时也会将adts的头封装在flv aac raw数据中
    #这样的话播放器为自动通过adts头自动选择采样频率
    #像ffplay, vlc都可以，但是flash是没有声音，
    #因为flash,只支持11025 22050 44100
    audio_enable        on;

    #服务端发送ack后，接收回应的超时时间，单位为秒
    #如果指定时间没有回应，认为失败
    ack_timeout         30;

    #设备心跳维持时间，如果指定时间内(秒）没有接收一个心跳
    #认为设备离线
    keepalive_timeout   30;

    #是否等待关键帧之后，再转发，
    #off:不需等待，直接转发
    #on:等第一个关键帧后，再转发
    wait_keyframe       off;

    #日志打印是否打印sip信息
    #off:不打印
    #on:打印接收或发送sip命令信息
    print_sip_message   off;
    
    #rtp包空闲等待时间，如果指定时间没有收到任何包
    #rtp监听连接自动停止，发送BYE命令
    rtp_idle_timeout    30;

    #rtp接收监听端口范围，最小值
    rtp_port_min        58200;
    #rtp接收监听端口范围，最大值
    rtp_port_max        58300;
}
vhost __defaultVhost__ {
}
